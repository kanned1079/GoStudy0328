<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise的then函数</title>
    <script>
        window.onload = () => {
            const p = new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve('用户数据')
                    // reject('出错')
                }, 1000)
            })

            // 调用then方法
            // then方法也有返回结果 也是一个promise对象
            // 对象的结果由回调函数来决定
            // 1.如果返回的是非promise属性 状态为成功 返回值为对象的成功值 [[PromiseResult]]:123
            // 2.如果是一个promise对象
            // 3.抛出错误
            const result = p.then(value => {
                console.log(value);
                // return 123;
                // 如果不写return 返回undefined 也是成功

                // return new Promise((resolve, reject) => {
                //     // resolve('ok')
                //     reject('failure')
                // })

                throw new Error('这是错误')
                // 错误值就是这里的'这是错误'
            }, reason => {
                console.error(reason)
            })

            // 链式调用
            p.then((value) => {
                // 1
            }, (reason) => {
                // 2
            }).then((value) => {
                // 3
            }, (reason) => {
                // 4
            })

            console.log(result)
        }
    </script>
</head>
<body>

</body>
</html>